"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —ç–ª–µ–∫—Ç–∏–≤–∞–º–∏ (—Ñ–∞–∫—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ã–º–∏ –∫—É—Ä—Å–∞–º–∏)
–ó–∞–ø—É—Å–∫: python seed_electives.py
"""
import sys
from pathlib import Path
import random

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
sys.path.insert(0, str(Path(__file__).parent))

from sqlalchemy.orm import Session, configure_mappers
from app.db.session import SessionLocal
from app.db.base import Base
from app.models.elective import Elective
from app.models.user import User, UserRole
from app.models.teacher import Teacher

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤—Å–µ relationships –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
try:
    configure_mappers()
except Exception:
    pass


# –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–∫—Ç–∏–≤—ã –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞
ELECTIVES_DATA = [
    # –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ IT
    {
        "title": "–í–≤–µ–¥–µ–Ω–∏–µ –≤ Python –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
        "description": "–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Python. –ò–∑—É—á–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞, –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö, —Ñ—É–Ω–∫—Ü–∏–π, –û–û–ü. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ –ø—Ä–æ–µ–∫—Ç—ã.",
        "max_students": 30,
        "schedule_info": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 18:00-20:00",
        "credits": 2,
    },
    {
        "title": "–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞: React –∏ Node.js",
        "description": "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º React –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ Node.js –¥–ª—è –±—ç–∫–µ–Ω–¥–∞. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.",
        "max_students": 25,
        "schedule_info": "–°—Ä–µ–¥–∞, 18:00-20:00",
        "credits": 3,
    },
    {
        "title": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏ Data Science",
        "description": "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∫—É—Ä—Å –ø–æ –º–∞—à–∏–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é. –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Python, pandas, scikit-learn.",
        "max_students": 20,
        "schedule_info": "–ü—è—Ç–Ω–∏—Ü–∞, 16:00-18:00",
        "credits": 3,
    },
    {
        "title": "–ú–æ–±–∏–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞: iOS –∏ Android",
        "description": "–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è iOS (Swift) –∏ Android (Kotlin). UI/UX –¥–∏–∑–∞–π–Ω, —Ä–∞–±–æ—Ç–∞ —Å API, –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.",
        "max_students": 25,
        "schedule_info": "–í—Ç–æ—Ä–Ω–∏–∫, 18:00-20:00",
        "credits": 3,
    },
    {
        "title": "–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —ç—Ç–∏—á–Ω—ã–π —Ö–∞–∫–∏–Ω–≥",
        "description": "–û—Å–Ω–æ–≤—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –º–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã, –∞–Ω–∞–ª–∏–∑ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π, —ç—Ç–∏—á–Ω—ã–π —Ö–∞–∫–∏–Ω–≥. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã.",
        "max_students": 20,
        "schedule_info": "–ß–µ—Ç–≤–µ—Ä–≥, 18:00-20:00",
        "credits": 2,
    },
    
    # –ë–∏–∑–Ω–µ—Å –∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ
    {
        "title": "–û—Å–Ω–æ–≤—ã –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–∞",
        "description": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∏ —Ä–∞–∑–≤–∏—Ç—å —Å–≤–æ–π –±–∏–∑–Ω–µ—Å. –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, —Ñ–∏–Ω–∞–Ω—Å—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å-–ø–ª–∞–Ω–∞.",
        "max_students": 30,
        "schedule_info": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 19:00-21:00",
        "credits": 2,
    },
    {
        "title": "–¶–∏—Ñ—Ä–æ–≤–æ–π –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ SMM",
        "description": "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å—Ä–µ–¥–µ. –†–∞–±–æ—Ç–∞ —Å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏, –∫–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏.",
        "max_students": 25,
        "schedule_info": "–°—Ä–µ–¥–∞, 19:00-21:00",
        "credits": 2,
    },
    {
        "title": "–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –≥—Ä–∞–º–æ—Ç–Ω–æ—Å—Ç—å",
        "description": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏, –Ω–∞–ª–æ–≥–∏, –∫—Ä–µ–¥–∏—Ç—ã. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.",
        "max_students": 40,
        "schedule_info": "–í—Ç–æ—Ä–Ω–∏–∫, 18:00-20:00",
        "credits": 2,
    },
    
    # –î–∏–∑–∞–π–Ω –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ
    {
        "title": "–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω: Adobe Photoshop –∏ Illustrator",
        "description": "–û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞–º–∏. –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤, –±–∞–Ω–Ω–µ—Ä–æ–≤, –∏–Ω—Ñ–æ–≥—Ä–∞—Ñ–∏–∫–∏. –ü—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞ –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏.",
        "max_students": 20,
        "schedule_info": "–ü—è—Ç–Ω–∏—Ü–∞, 18:00-20:00",
        "credits": 2,
    },
    {
        "title": "UI/UX –¥–∏–∑–∞–π–Ω –¥–ª—è –≤–µ–± –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π",
        "description": "–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤. User Experience, –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞ —Å Figma.",
        "max_students": 25,
        "schedule_info": "–ß–µ—Ç–≤–µ—Ä–≥, 18:00-20:00",
        "credits": 3,
    },
    {
        "title": "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –∏ –≤–∏–¥–µ–æ–º–æ–Ω—Ç–∞–∂",
        "description": "–û—Å–Ω–æ–≤—ã —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, —Ä–∞–±–æ—Ç–∞ —Å –∫–∞–º–µ—Ä–æ–π, –∫–æ–º–ø–æ–∑–∏—Ü–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ Lightroom. –í–∏–¥–µ–æ–º–æ–Ω—Ç–∞–∂ –≤ Adobe Premiere Pro.",
        "max_students": 20,
        "schedule_info": "–°—É–±–±–æ—Ç–∞, 10:00-13:00",
        "credits": 2,
    },
    
    # –Ø–∑—ã–∫–∏
    {
        "title": "–î–µ–ª–æ–≤–æ–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫",
        "description": "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏. –î–µ–ª–æ–≤–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã, —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã.",
        "max_students": 20,
        "schedule_info": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 18:00-20:00",
        "credits": 2,
    },
    {
        "title": "–†–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–π: Advanced",
        "description": "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–≥–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ. –û–±—Å—É–∂–¥–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ç–µ–º, –¥–µ–±–∞—Ç—ã, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, —Ä–∞–±–æ—Ç–∞ –Ω–∞–¥ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ–º.",
        "max_students": 15,
        "schedule_info": "–°—Ä–µ–¥–∞, 18:00-20:00",
        "credits": 2,
    },
    {
        "title": "–ö–∏—Ç–∞–π—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö",
        "description": "–ë–∞–∑–æ–≤—ã–π –∫—É—Ä—Å –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞. –ò–µ—Ä–æ–≥–ª–∏—Ñ–∏–∫–∞, –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ, –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞, —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞.",
        "max_students": 20,
        "schedule_info": "–í—Ç–æ—Ä–Ω–∏–∫, 19:00-21:00",
        "credits": 2,
    },
    
    # –ù–∞—É–∫–∞ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
    {
        "title": "–ù–∞—É—á–Ω–æ–µ –ø–∏—Å—å–º–æ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏",
        "description": "–ö–∞–∫ –ø–∏—Å–∞—Ç—å –Ω–∞—É—á–Ω—ã–µ —Å—Ç–∞—Ç—å–∏, –æ—Ñ–æ—Ä–º–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ—Ü–µ–Ω–∑–µ–Ω—Ç–∞–º–∏. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –∂—É—Ä–Ω–∞–ª–∞—Ö.",
        "max_students": 25,
        "schedule_info": "–ü—è—Ç–Ω–∏—Ü–∞, 16:00-18:00",
        "credits": 2,
    },
    {
        "title": "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö",
        "description": "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –†–∞–±–æ—Ç–∞ —Å R –∏ Python, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.",
        "max_students": 30,
        "schedule_info": "–ß–µ—Ç–≤–µ—Ä–≥, 16:00-18:00",
        "credits": 3,
    },
    
    # –õ–∏—á–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ
    {
        "title": "–û—Ä–∞—Ç–æ—Ä—Å–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ –ø—É–±–ª–∏—á–Ω—ã–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è",
        "description": "–¢–µ—Ö–Ω–∏–∫–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∞—É–¥–∏—Ç–æ—Ä–∏–µ–π. –†–∞–±–æ—Ç–∞ —Å –≥–æ–ª–æ—Å–æ–º, –∂–µ—Å—Ç–∞–º–∏, –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ö–∞, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è.",
        "max_students": 20,
        "schedule_info": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 19:00-21:00",
        "credits": 2,
    },
    {
        "title": "–¢–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
        "description": "–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á, –±–æ—Ä—å–±–∞ —Å –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–µ–π. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ç–µ—Ö–Ω–∏–∫–∏.",
        "max_students": 30,
        "schedule_info": "–í—Ç–æ—Ä–Ω–∏–∫, 18:00-20:00",
        "credits": 1,
    },
    {
        "title": "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏",
        "description": "–†–∞–∑–≤–∏—Ç–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞, —ç–º–ø–∞—Ç–∏–∏, –Ω–∞–≤—ã–∫–æ–≤ –º–µ–∂–ª–∏—á–Ω–æ—Å—Ç–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è. –†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.",
        "max_students": 25,
        "schedule_info": "–°—Ä–µ–¥–∞, 19:00-21:00",
        "credits": 2,
    },
    
    # –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
    {
        "title": "–ë–ª–æ–∫—á–µ–π–Ω –∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã: –æ—Ç –æ—Å–Ω–æ–≤ –¥–æ –ø—Ä–∞–∫—Ç–∏–∫–∏",
        "description": "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –±–ª–æ–∫—á–µ–π–Ω, —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, DeFi, NFT. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ Solidity, —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.",
        "max_students": 20,
        "schedule_info": "–ü—è—Ç–Ω–∏—Ü–∞, 18:00-20:00",
        "credits": 3,
    },
    {
        "title": "3D-–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å",
        "description": "–°–æ–∑–¥–∞–Ω–∏–µ 3D-–º–æ–¥–µ–ª–µ–π –≤ Blender, –æ—Å–Ω–æ–≤—ã VR/AR —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ä–∞–±–æ—Ç–∞ —Å Unity. –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∏—Ä–æ–≤.",
        "max_students": 20,
        "schedule_info": "–°—É–±–±–æ—Ç–∞, 14:00-17:00",
        "credits": 3,
    },
    {
        "title": "–†–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞ –∏ Arduino",
        "description": "–û—Å–Ω–æ–≤—ã —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∏, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ Arduino, —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–æ–±–æ—Ç–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.",
        "max_students": 15,
        "schedule_info": "–ß–µ—Ç–≤–µ—Ä–≥, 19:00-21:00",
        "credits": 3,
    },
    {
        "title": "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤ –º–µ–¥–∏—Ü–∏–Ω–µ",
        "description": "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ AI –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏, –∞–Ω–∞–ª–∏–∑–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –≠—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã.",
        "max_students": 20,
        "schedule_info": "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, 16:00-18:00",
        "credits": 2,
    },
]


def create_electives(db: Session):
    """–°–æ–∑–¥–∞—Ç—å —ç–ª–µ–∫—Ç–∏–≤—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"""
    created_count = 0
    skipped_count = 0
    
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π (teachers)
    teachers = db.query(User).join(Teacher).filter(User.role == UserRole.STAFF).all()
    
    if not teachers:
        print("‚ö†Ô∏è  –ù–µ –Ω–∞–π–¥–µ–Ω–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ seed_students.py")
        return 0, 0
    
    # –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    teachers_list = list(teachers)
    random.shuffle(teachers_list)
    
    for idx, elective_data in enumerate(ELECTIVES_DATA):
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π —ç–ª–µ–∫—Ç–∏–≤
        existing = db.query(Elective).filter(Elective.title == elective_data["title"]).first()
        if existing:
            skipped_count += 1
            continue
        
        # –í—ã–±–∏—Ä–∞–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –º–µ–Ω—å—à–µ —á–µ–º —ç–ª–µ–∫—Ç–∏–≤–æ–≤)
        teacher = teachers_list[idx % len(teachers_list)]
        
        # –°–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–¥–æ 30% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞)
        max_students = elective_data.get("max_students", 30)
        current_students = random.randint(0, max_students // 3)
        
        elective = Elective(
            title=elective_data["title"],
            description=elective_data.get("description"),
            teacher_user_id=teacher.id,
            max_students=max_students,
            current_students=current_students,
            schedule_info=elective_data.get("schedule_info"),
            credits=elective_data.get("credits"),
            is_active=1,  # –í—Å–µ —ç–ª–µ–∫—Ç–∏–≤—ã –∞–∫—Ç–∏–≤–Ω—ã
        )
        
        db.add(elective)
        created_count += 1
    
    db.commit()
    return created_count, skipped_count


if __name__ == "__main__":
    print("üéì –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —ç–ª–µ–∫—Ç–∏–≤–∞–º–∏...")
    
    db: Session = SessionLocal()
    try:
        created, skipped = create_electives(db)
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω–æ —ç–ª–µ–∫—Ç–∏–≤–æ–≤: {created}")
        if skipped > 0:
            print(f"‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç): {skipped}")
        print("üéä –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏: {e}")
        import traceback
        traceback.print_exc()
        db.rollback()
        raise
    finally:
        db.close()

